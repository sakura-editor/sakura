version: 1.0.{build}
image: Visual Studio 2017

configuration:
  - Release
  - Debug

platform:
  - Win32
  - x64
  - MinGW

build_script:
- cmd: >-
    call checkEncoding.bat

    call build-all.bat %PLATFORM% %CONFIGURATION%

before_test:
- cmd: >-
    call tests\create-project.bat %platform% %configuration%

    call tests\build-project.bat %platform% %configuration%

test_script:
- cmd: >-
    call tests\run-tests.bat %platform% %configuration%

artifacts:
- path: 'sakura-*$(platform)-$(configuration)*.zip'
